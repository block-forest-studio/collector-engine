// erd_dbdiagram_physical.dbml
// Generated from psql \d+ output (schemas: raw, staging, analytics)
// NOTE: dbdiagram.io does NOT support the [schema: ...] setting.
// We flatten schema into table name prefixes: raw_*, staging_*, analytics_*.
//
// Physical schema only:
// - Tables, columns, PKs, indexes
// - No foreign keys (none defined in PostgreSQL at generation time)

Table raw.logs {
  chain_id integer [not null]
  block_number bigint [not null]
  block_hash bytea [not null]
  transaction_hash bytea [not null]
  log_index integer [not null]
  address bytea [not null]
  topic0 bytea
  topic1 bytea
  topic2 bytea
  topic3 bytea
  data bytea [not null]
  removed boolean [not null]

  Indexes {
    (chain_id, transaction_hash, log_index) [pk, name: "logs_pk"]
    (chain_id, block_number) [name: "logs_block_idx"]
  }
}

Table raw.transactions {
  chain_id integer [not null]
  hash bytea [not null]
  block_number bigint
  block_hash bytea
  transaction_index integer
  from bytea [not null]
  to bytea
  gas bigint [not null]
  gas_price numeric
  max_fee_per_gas numeric
  max_priority_fee_per_gas numeric
  input bytea [not null]
  nonce bigint [not null]
  value numeric [not null]
  type integer
  v bigint [not null]
  r text [not null]
  s text [not null]
  y_parity integer
  access_list jsonb [not null, default: `'[]'::jsonb`]

  Indexes {
    (chain_id, hash) [pk, name: "txs_pk"]
    (chain_id, block_number) [name: "txs_block_idx"]
  }
}

Table raw.receipts {
  chain_id integer [not null]
  transaction_hash bytea [not null]
  block_number bigint [not null]
  block_hash bytea [not null]
  transaction_index integer [not null]
  from bytea [not null]
  to bytea
  contract_address bytea
  status integer
  type integer
  gas_used bigint [not null]
  cumulative_gas_used bigint [not null]
  effective_gas_price numeric
  logs_bloom bytea
  logs jsonb [not null, default: `'[]'::jsonb`]

  Indexes {
    (chain_id, transaction_hash) [pk, name: "receipts_pk"]
    (chain_id, block_number) [name: "receipts_block_idx"]
  }
}
